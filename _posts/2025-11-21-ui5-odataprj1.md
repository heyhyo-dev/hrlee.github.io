---
title: "[UI5] OData로 항공사 리포트 구현하기"
excerpt: "SAP OData Project1 with CDS View"

categories:
  - UI5
tags:
  - [UI5]

permalink: /ui5/odataprj1/

toc: true
toc_sticky: true

date: 2025-11-21
last_modified_at: 2025-11-21
---

<img width="700" height="450" alt="image" src="https://github.com/user-attachments/assets/cee2be6a-cdf1-4db9-92e8-f4b18a83e570" />

> **메인 프로세스 전개 과정**   
> 1. eclipse에서 CDS View 생성한다. ( OData 서비스 자동생성되게 )
> 2. OData 서비스 활성화한다.
> 3. BAS에서 view 로직 추가하여 실행한다.

---

## 사전 준비
eclipse/jdk 다운로드하여 eclipse 내에서 ABAP Development Tools까지 설치 필요하다.  
구글링하여 블로그 설명 참조 e.g. <https://fiveoceans.tistory.com/38>

---

## eclipse에서 CDS View 생성하기
<img width="835" height="337" alt="image" src="https://github.com/user-attachments/assets/5d21b331-0ff9-424f-83a0-983a9d4dc4a6" />   
1. 로컬 오브젝트 우클릭 > New > Other ABAP Repository Object    
<img width="602" height="466" alt="image" src="https://github.com/user-attachments/assets/13e26b7b-2bd3-412e-ba0d-b1739fd2a083" />  
2. 선택 후 Next  
<img width="671" height="393" alt="image" src="https://github.com/user-attachments/assets/c6f4458f-b669-43b9-8aca-ca439f6abeb6" />  
3. Name 작명, Description도 프로젝트 내용에 맞춰서 작성  

### 코드 
<img width="462" height="178" alt="image" src="https://github.com/user-attachments/assets/7dc076c1-e58c-494f-a93d-bcfca819d1f1" />
1. SE11에서 조회될 ViewName  
2. Annotation(@)을 확장하여 OData 서비스를 통해 CDS View를 생성할 수 있다.  
3. SFLIGHT 테이블에서 데이터 가져올 것  
4. 전체 데이터  

활성화 시, Annotation 때문에 시스템이 자동 OData 서비스를 생성  
→ OData 서비스 이름: YDESD_SFLIGHT99_CDS  

---

## 서비스 추가 및 활성화 `/N/IWFND/MAINT_SERVICE`
*앞으로 작명한 이름 뒤에 99가 아니라 70으로 스크린샷이 보일 텐데 같은 것이라고 생각하기 (캡처 이슈)* 
<img width="1735" height="432" alt="image" src="https://github.com/user-attachments/assets/da666ef2-5b16-4664-98ef-1d1ed3e650d0" />  
기술 서비스 이름 란에 OData 서비스 이름(YDESD_SFLIGHT99_CDS)을 기입 후 엔터  
해당 서비스 선택 > ‘선택한 서비스 추가’ 클릭  

<img width="1292" height="862" alt="image" src="https://github.com/user-attachments/assets/e18097d5-b0e6-40b5-97b6-4aec9259be0f" />  
프로젝트용이니까 로컬로 만든다.  

<img width="1113" height="807" alt="image" src="https://github.com/user-attachments/assets/e407db85-4068-4ffd-a9d5-6f13c5a13068" />  
간혹 안 되면, 위 활성화를 클릭한다.  

---

## uri Path 확인 `SICF`
<img width="1300" height="631" alt="image" src="https://github.com/user-attachments/assets/cf750515-67e9-4ff9-a70f-5fda06abec51" />  
OData 서비스 이름(YDESD_SFLIGHT99_CDS)을 입력하여 실행한다. 

<img width="1270" height="522" alt="image" src="https://github.com/user-attachments/assets/6b829828-beb4-4a37-8244-32f478978d44" />  
uri path를 확인할 수 있다. 서비스가 활성화된 것도 확인 가능하다.  
이 Path를 아래 서비스 테스트에서 입력한다.

---

## 서비스 테스트 `/N/IWFND/GW_CLIENT`
<img width="1788" height="506" alt="image" src="https://github.com/user-attachments/assets/a7307da9-9faf-4339-a850-ff3ad0bddbc8" />  
위에서 확인한 Path를 입력하여 실행한다.  
 xml:base= "http://주소/sap/opu/odata/sap/YDESD_SFLIGHT70_CDS/"> 를 메모장에 복사해둔다. ( 이후 BAS에서 필요 )  
<img width="1869" height="861" alt="image" src="https://github.com/user-attachments/assets/22e2321e-0dcc-47eb-948c-9320e3941e01" />   
상단 오른쪽의 Add URI Option 버튼을 클릭하여 $metadata 를 선택한다. > Execute 한다.    
→ 속성의 이름, 타입, 길이, 필드 라벨 등 확인 가능하다.   
<img width="1853" height="819" alt="image" src="https://github.com/user-attachments/assets/0b45b143-a960-4b70-9b1a-3b6598dfe559" />
Entity Set 버튼을 클릭하면 SFLIGHT 테이블의 실제 데이터를 확인할 수 있다.  

---

## BAS에서 Report 생성하여 실행
BAS를 실행하여 F1 > Fiori: Open Application Generator 로 새 프로젝트를 열어준다.  
Template Selection : Basic  

<img width="1299" height="460" alt="image" src="https://github.com/user-attachments/assets/660ec3ef-3af7-4729-b8f9-b1eae071491d" />  

Entity Selection ] View Name : List  

Project Attributes ] 이름, 타이틀은 원하는 대로 변경하여 finish.



### List.view 로직 추가
path는 entityset(예:/YDESD_SFLIGHT99)으로 입력한다. 

```xml
<mvc:View controllerName="project1.controller.List"
    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"
    xmlns="sap.m">
    <Page id="page" title="{i18n>title}">
        <content>
            <Table id="idFlightList"
                   inset="false"
                   items="{ 
                            path:'/YDESD_SFLIGHT70'
                        }">
                <columns>
                    <Column id="col1">
                        <Text id="txt1" text="{i18n>CARRID}" />
                    </Column>
                    <Column id="col2">
                        <Text id="txt2" text="{i18n>CONNID}" />
                    </Column>
                    <Column id="col3">
                        <Text id="txt3" text="{i18n>CURRENCY}" />
                    </Column>
                    <Column id="col4">
                        <Text id="txt4" text="{i18n>FLDATE}" />
                    </Column>
                    <Column id="col5">
                        <Text id="txt5" text="{i18n>PAYMENTSUM}" />
                    </Column>
                    <Column id="col6">
                        <Text id="txt6" text="{i18n>PLANETYPE}" />
                    </Column>
                    <Column id="col7">
                        <Text id="txt7" text="{i18n>PRICE}" />
                    </Column>
                </columns>

               <items>
                    <ColumnListItem id="coll1">
                        <cells>
                            <Text id="txti1" text="{CARRID}" />
                        </cells>
                        <cells>
                            <Text id="txti2" text="{CONNID}" />
                        </cells>
                        <cells>
                            <Text id="txti3" text="{CURRENCY}" />
                        </cells>
                        <cells>
                            <Text id="txti4" text="{FLDATE}" />
                        </cells>
                        <cells>
                            <Text id="txti5" text="{PAYMENTSUM}" />
                        </cells>
                        <cells>
                            <Text id="txti6" text="{PLANETYPE}" />
                        </cells>
                        <cells>
                            <Text id="txti7" text="{PRICE}" />
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </content>
    </Page>

</mvc:View>  
```  

### i18n 로직 추가
<img width="731" height="400" alt="image" src="https://github.com/user-attachments/assets/66c2caa6-6418-41ca-95fd-79fb1a37b74d" />  


### 결과
*terminal - 해당 프로젝트 경로에서(cd project1) npm install / npm run start*  
<img width="1902" height="861" alt="image" src="https://github.com/user-attachments/assets/c0294d96-6972-4fa7-bce4-1142a8475293" />  

>SAP 서버의 SFLIGHT 데이터를 UI5로 구현한 화면이 조회된다.

